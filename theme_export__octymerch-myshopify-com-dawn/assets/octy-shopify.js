(()=>{var e={942:e=>{e.exports=[{section_id:"banner-title",default_value:"Welcome to our store!"},{section_id:"banner-cta",default_value:"Buy some stuff!"},{section_id:"banner-image",default_value:"<img srcset='//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_375x.jpg?v=1632134922 375w,//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_750x.jpg?v=1632134922 750w,//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_1100x.jpg?v=1632134922 1100w,//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_1500x.jpg?v=1632134922 1500w,//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_1780x.jpg?v=1632134922 1780w,//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_2000x.jpg?v=1632134922 2000w,//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_3000x.jpg?v=1632134922 3000w,//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_3840x.jpg?v=1632134922 3840w,' sizes='100vw' src='//cdn.shopify.com/s/files/1/0598/2578/2953/files/boots-on-blue_1500x.jpg?v=1632134922' loading='lazy' alt='' width='4096' height='2731.0000000000005'>"},{section_id:"promo-banner",default_value:""}]},992:e=>{e.exports={octyAppHost:"",createCustomerURI:"/api/customers/createupdate",createEventURI:"/api/events/create",createItemURI:"/api/hooks/items/create",updateItemURI:"/api/hooks/items/update",deleteItemURI:"/api/hooks/items/delete",getContentURI:"/api/content",getRecommendationsURI:"/api/recommendations"}},209:(e,t,o)=>{const n=o(992),s=o(942);e.exports={getDynamicContent:function(e){return new Promise((t=>{const o=new XMLHttpRequest;o.open("POST",n.getContentURI,!0),o.onload=function(e){4===o.readyState&&(200===o.status?t([!0,JSON.parse(o.responseText).sections]):(console.warn("Failed to get dynamic content!"),t([!1,null])))},o.onerror=function(e){console.warn("Failed to get dynamic content!"),t([!1,null])},o.setRequestHeader("Content-Type","application/json"),o.send(JSON.stringify({octy_customer_id:e,sections:s}))}))},loadDefaultContent:function(){const e=document.querySelectorAll("[data-octy-content]");if(null!=e){for(const t in e)if(e.hasOwnProperty(t)){const o=e[t],n=o.getAttribute("data-octy-content");for(;o.firstChild;)o.removeChild(o.firstChild);let r;for(const e in s)if(s[e].section_id===n){r=s[e].default_value;break}o.innerHTML+=r}console.log("Default content loaded!")}else console.log("No dynamic sections found!")},loadDynamicContent:function(e){const t=document.querySelectorAll("[data-octy-content]");if(null!=t)for(const o in t)if(t.hasOwnProperty(o)){const n=t[o],s=n.getAttribute("data-octy-content");for(;n.firstChild;)n.removeChild(n.firstChild);let r;for(const t in e)if(e[t].sectionID===s){r=e[t].content;break}n.innerHTML+=r}}}},319:(e,t,o)=>{const n=o(992);e.exports={createOctyEvent:function(e,t,o){return new Promise(((s,r)=>{const i=new XMLHttpRequest;i.open("POST",n.createEventURI,!0),i.onload=function(e){4===i.readyState&&(201===i.status?(console.log("Captured Octy event instance! :"+t),s("done")):(console.warn("Failed to capture Octy event instance!"),r(new Error("Server Error"))))},i.onerror=function(e){console.warn("Failed to capture Octy event instance!"),r(new Error("Server Error"))},i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify({octy_customer_id:e,event_type:t,event_properties:o}))}))}}},534:(e,t,o)=>{const n=o(992),s=o(853);e.exports={getLSValues:function(){return localStorage.getItem("octy-customer-id")},setLSValues:function(e){localStorage.setItem("octy-customer-id",e)},clearLSValues:function(){localStorage.removeItem("octy-customer-id")},createUpdateProfile:function(e){return new Promise(((t,o)=>{let r,i=!1;const c={};let a=window.ShopifyAnalytics.meta.page.customerId;null==e?(r="octy-customer-id-"+s.uuidv4(),i=!0):r=e,null==a?a="":c.shopify_customer_id=a;const l=new XMLHttpRequest;l.open("POST",n.createCustomerURI,!0),l.onload=function(e){4===l.readyState&&(201===l.status?(window.isProfileEnabled=!0,console.log("Created/Updated Octy profile!"),t(JSON.parse(l.responseText).customer_id)):(window.isProfileEnabled=!1,console.warn("Failed to create new Octy profile! Unable to track events or provide personalised experience during this session"),o(new Error("Server Error"))))},l.onerror=function(e){window.isProfileEnabled=!1,console.warn("Failed to create new Octy profile! Unable to track events or provide personalised experience during this session"),o(new Error("Server Error"))},l.setRequestHeader("Content-Type","application/json"),l.send(JSON.stringify({octy_customer_id:r,shopify_customer_id:a,has_charged:!1,profile_data:c,platform_info:{user_agent:s.getUA()},generated_new_id:i}))}))}}},579:(e,t,o)=>{const n=o(992),s=o(942),r=o(853),i=o(749),c=o(534),a=o(209),l=o(319);window.isProfileEnabled=!1;class d{static async registerEventListeners(){const e=document.querySelectorAll("[data-octy-event-click]");if(null!=e){for(const t in e)if(e.hasOwnProperty(t)){const o=e[t].getAttribute("data-octy-event-click");e[t].addEventListener("click",(function(){d.capture(o)}),!1)}console.log("Click octy-event handlers registred!")}else console.warn("No click octy-event handlers registred!");const t=document.querySelectorAll("[data-octy-event-hover]");if(null!=t){for(const e in t)if(t.hasOwnProperty(e)){const o=t[e].getAttribute("data-octy-event-hover");t[e].addEventListener("mouseenter",(function(){d.capture(o)}),!1)}console.log("Hover octy-event handlers registred!")}else console.warn("No hover octy-event handlers registred!")}static async capture(e){if(window.isProfileEnabled){console.log("Event: "+e+" occurred. Processing event capture...");let t,o=!1;switch(e){case"showed_love":t={device:r.getUA()},o=!0;break;case"engaged_with_content":t={medium:"web content",platform:r.getUA()},o=!0}if(o){const o=c.getLSValues();await l.createOctyEvent(o,e,t)}}else console.log("Event: "+e+" occurred but no credentials set in LS. Unable to capture this event instance.")}}e.exports={OctyEventManager:d,OctyContentManager:class{static async assessDynamicContentSections(){const e=document.querySelectorAll("[data-octy-content]");if(window.isProfileEnabled){const t=await c.getLSValues(),o=await a.getDynamicContent(t);o[0]?a.loadDynamicContent(o[1]):a.loadDefaultContent(e)}else a.loadDefaultContent(e)}},OctyRecommendationsManager:class{static async loadProductRecommendations(){const e=document.getElementById("octy-rec-products"),t=document.getElementById("rec-header");if(e.style.display="none",t.style.display="none",window.isProfileEnabled){const o=await c.getLSValues(),n=await i.getProductRecommendations(o);if(n.length<1)e.style.display="none",t.style.display="none";else{t.style.display="block",e.style.display="block";let o=0;for(const t of n){if(o>=3)break;e.insertAdjacentHTML("afterbegin",' <div class="column"> <div class="card"> <img src="'+t.item_image_url+'" style="width:100%"> <h3>'+t.item_name+'</h3> <p class="price">Â£'+t.item_price+'</p> <p><form><button formaction="'+t.item_link+'">View Product</button></form></p> </div> </div>'),o++}}}else e.style.display="none",t.style.display="none"}},recommendations:i,functions:c,content:a,events:l,endpoints:n,DCSMap:s,utils:r}},749:(e,t,o)=>{const n=o(992);e.exports={getProductRecommendations:async function(e){return new Promise(((t,o)=>{const s=document.getElementById("octy-rec-products"),r=document.getElementById("rec-header"),i=new XMLHttpRequest;i.open("POST",n.getRecommendationsURI,!0),i.onload=function(e){4===i.readyState&&(200===i.status?t(JSON.parse(i.responseText).items):(console.warn("Failed to get product recommendations!"),s.style.display="none",r.style.display="none",o(new Error("Server Error"))))},i.onerror=function(e){console.warn("Failed to get product recommendations!"),s.style.display="none",r.style.display="none",o(new Error("Server Error"))},i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify({octy_customer_id:e}))}))}}},853:e=>{e.exports={uuidv4:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))},getUA:function(){let e="Unknown";const t={"Generic Linux":/Linux/i,Android:/Android/i,BlackBerry:/BlackBerry/i,Bluebird:/EF500/i,"Chrome OS":/CrOS/i,Datalogic:/DL-AXIS/i,Honeywell:/CT50/i,iPad:/iPad/i,iPhone:/iPhone/i,iPod:/iPod/i,macOS:/Macintosh/i,Windows:/IEMobile|Windows/i,Zebra:/TC70|TC55/i};return Object.keys(t).map((o=>navigator.userAgent.match(t[o])&&(e=o))),e}}}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}(()=>{const{OctyEventManager:e,OctyContentManager:t,OctyRecommendationsManager:n,recommendations:s,functions:r,content:i,events:c,endpoints:a,DSCMap:l,utils:d}=o(579);jQuery(document).ready((function(){console.log("loaded"),async function(){try{const e=r.getLSValues(),t=await r.createUpdateProfile(e);r.setLSValues(t)}catch(e){console.error(e),r.clearLSValues()}try{await e.registerEventListeners(),await t.assessDynamicContentSections(),await n.loadProductRecommendations()}catch(e){console.error(e)}}()})),console.log("loaded")})()})();